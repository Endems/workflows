name: '游 Processo Completo de Release da Lib'
description: 'Executa todos os passos necess치rios para o release de uma lib, incluindo obten칞칚o da vers칚o, configura칞칚o de vari치veis de ambiente, valida칞칚o e atualiza칞칚o de vers칚o.'
inputs:
  release_branch:
    description: 'Branch de release para a qual a vers칚o ser치 incrementada.'
    required: false
    default: 'main'

outputs:
  now:
    description: 'Data e hora atual.'
    value: ${{ steps.setup_env_vars.outputs.now }}
  version:
    description: 'A pr칩xima vers칚o do projeto.'
    value: ${{ steps.get_and_check_version.outputs.version }}
  version_semantic:
    description: 'Vers칚o sem칙ntica para ser apresentada.'
    value: ${{ steps.setup_env_vars.outputs.version_semantic }}
  archive_name:
    description: 'Nome do arquivo de release.'
    value: ${{ steps.setup_env_vars.outputs.archive_name }}
  release_branch:
    description: 'Branch de release para a qual a vers칚o ser치 incrementada.'
    value: ${{ steps.setup_env_vars.outputs.release_branch }}
  module:
    description: 'M칩dulo a ser lan칞ado.'
    value: ${{ steps.setup_env_vars.outputs.module }}
  folder:
    description: 'Pasta onde o release ser치 lan칞ado.'
    value: ${{ steps.setup_env_vars.outputs.folder }}
  module_name:
    description: 'Nome do m칩dulo em caixa alta.'
    value: ${{ steps.setup_env_vars.outputs.module_name }}
  branch_name:
    description: 'Branch atual do reposit칩rio.'
    value: ${{ steps.setup_env_vars.outputs.branch_name }}
  module_description:
    description: 'Descri칞칚o do m칩dulo.'
    value: ${{ steps.setup_env_vars.outputs.module_description }}
    
runs:
  using: 'composite'
  steps:
    - name: Obter e Verificar Vers칚o
      id: get_and_check_version
      uses: Endems/workflows/get-and-check-version@main
      with:
        release_branch: ${{ inputs.release_branch }}

    - name: Configurar Vari치veis de Ambiente
      id: setup_env_vars
      uses: Endems/workflows/setup-env-vars@main
      with:
        version: ${{ steps.get_and_check_version.outputs.version }}
        release_branch: ${{ inputs.release_branch }}

    - name: Validar Vari치veis de Ambiente
      uses: Endems/workflows/check-env-vars@main
      with:
        now: ${{ steps.setup_env_vars.outputs.now }}
        version: ${{ steps.setup_env_vars.outputs.version }}
        version_semantic: ${{ steps.setup_env_vars.outputs.version_semantic }}
        release_branch: ${{ steps.setup_env_vars.outputs.release_branch }}
        archive_name: ${{ steps.setup_env_vars.outputs.archive_name }}
        module: ${{ steps.setup_env_vars.outputs.module }}
        folder: ${{ steps.setup_env_vars.outputs.folder }}
        module_name: ${{ steps.setup_env_vars.outputs.module_name }}
        branch_name: ${{ steps.setup_env_vars.outputs.branch_name }}
        module_description: ${{ steps.setup_env_vars.outputs.module_description }}

    - name: Atualizar Vers칚o
      uses: Endems/workflows/update-version@main
      with:
        version: ${{ steps.setup_env_vars.outputs.version }}
        version_semantic: ${{ steps.setup_env_vars.outputs.version_semantic }}

    