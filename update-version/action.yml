name: 'üéõÔ∏è Atualizar Vers√£o'
description: 'Atualiza a vers√£o no package.json e realiza um commit.'
inputs:
  version:
    description: 'Nova vers√£o para ser definida no package.json.'
    required: true
  version_semantic:
    description: 'Vers√£o sem√¢ntica para ser apresentada.'
    required: true
runs:
  using: 'composite'
  steps:
    - name: üöö Checkout Project
      uses: actions/checkout@v3

    - name: Update Version
      run: |
        git pull --rebase origin ${{ github.ref_name }}

        echo "Atualizando vers√£o para ${{ inputs.version }}"
        jq '.version = "${{ inputs.version }}"' package.json > temp.json && mv temp.json package.json
      shell: bash

    - name: Commit
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        
        git add package.json
        git commit -m "RELEASE-${{ inputs.version_semantic }}"
        
        git push
        echo "Vers√£o atualizada para ${{ inputs.version }}"
      shell: bash
      env:
        VERSION: ${{ inputs.version }}
        VERSION_SEMANTIC: ${{ inputs.version_semantic }}
